"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const utils_debug_1 = require("@hint/utils-debug");
const utils_types_1 = require("@hint/utils-types");
const is_valid_1 = require("./meta/is-valid");
const debug = utils_debug_1.debug(__filename);
/*
 * ------------------------------------------------------------------------------
 * Public
 * ------------------------------------------------------------------------------
 */
class TypeScriptConfigIsValid {
    constructor(context) {
        const invalidJSONFile = (typeScriptConfigInvalid, event) => {
            const { error, resource } = typeScriptConfigInvalid;
            debug(`${event} received`);
            context.report(resource, error.message, { severity: utils_types_1.Severity.error });
        };
        const invalidExtends = (typeScriptConfigInvalid, event) => {
            const { error, resource, getLocation } = typeScriptConfigInvalid;
            debug(`${event} received`);
            context.report(resource, error.message, {
                location: getLocation('extends', { at: 'value' }),
                severity: utils_types_1.Severity.error
            });
        };
        const invalidSchema = (fetchEnd) => {
            const { groupedErrors, resource } = fetchEnd;
            debug(`'parse::error::typescript-config::schema' received`);
            groupedErrors.forEach((groupedError) => {
                context.report(resource, groupedError.message, {
                    location: groupedError.location,
                    severity: utils_types_1.Severity.error
                });
            });
        };
        context.on('parse::error::typescript-config::json', invalidJSONFile);
        context.on('parse::error::typescript-config::extends', invalidExtends);
        context.on('parse::error::typescript-config::schema', invalidSchema);
    }
}
exports.default = TypeScriptConfigIsValid;
TypeScriptConfigIsValid.meta = is_valid_1.default;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaXMtdmFsaWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvaXMtdmFsaWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFJQSxtREFBK0M7QUFDL0MsbURBQTZDO0FBUzdDLDhDQUFtQztBQUVuQyxNQUFNLEtBQUssR0FBb0IsbUJBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUU3Qzs7OztHQUlHO0FBRUgsTUFBcUIsdUJBQXVCO0lBR3hDLFlBQW1CLE9BQTRDO1FBRTNELE1BQU0sZUFBZSxHQUFHLENBQUMsdUJBQW9ELEVBQUUsS0FBYSxFQUFFLEVBQUU7WUFDNUYsTUFBTSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztZQUVwRCxLQUFLLENBQUMsR0FBRyxLQUFLLFdBQVcsQ0FBQyxDQUFDO1lBRTNCLE9BQU8sQ0FBQyxNQUFNLENBQ1YsUUFBUSxFQUNSLEtBQUssQ0FBQyxPQUFPLEVBQ2IsRUFBRSxRQUFRLEVBQUUsc0JBQVEsQ0FBQyxLQUFLLEVBQUUsQ0FDL0IsQ0FBQztRQUNOLENBQUMsQ0FBQztRQUVGLE1BQU0sY0FBYyxHQUFHLENBQUMsdUJBQXFELEVBQUUsS0FBYSxFQUFFLEVBQUU7WUFDNUYsTUFBTSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLEdBQUcsdUJBQXVCLENBQUM7WUFFakUsS0FBSyxDQUFDLEdBQUcsS0FBSyxXQUFXLENBQUMsQ0FBQztZQUUzQixPQUFPLENBQUMsTUFBTSxDQUNWLFFBQVEsRUFDUixLQUFLLENBQUMsT0FBTyxFQUNiO2dCQUNJLFFBQVEsRUFBRSxXQUFXLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxDQUFDO2dCQUNqRCxRQUFRLEVBQUUsc0JBQVEsQ0FBQyxLQUFLO2FBQzNCLENBQ0osQ0FBQztRQUNOLENBQUMsQ0FBQztRQUVGLE1BQU0sYUFBYSxHQUFHLENBQUMsUUFBdUMsRUFBRSxFQUFFO1lBQzlELE1BQU0sRUFBRSxhQUFhLEVBQUUsUUFBUSxFQUFFLEdBQUcsUUFBUSxDQUFDO1lBRTdDLEtBQUssQ0FBQyxvREFBb0QsQ0FBQyxDQUFDO1lBRTVELGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxZQUFpQixFQUFFLEVBQUU7Z0JBQ3hDLE9BQU8sQ0FBQyxNQUFNLENBQ1YsUUFBUSxFQUNSLFlBQVksQ0FBQyxPQUFPLEVBQ3BCO29CQUNJLFFBQVEsRUFBRSxZQUFZLENBQUMsUUFBUTtvQkFDL0IsUUFBUSxFQUFFLHNCQUFRLENBQUMsS0FBSztpQkFDM0IsQ0FDSixDQUFDO1lBQ04sQ0FBQyxDQUFDLENBQUM7UUFDUCxDQUFDLENBQUM7UUFFRixPQUFPLENBQUMsRUFBRSxDQUFDLHVDQUF1QyxFQUFFLGVBQWUsQ0FBQyxDQUFDO1FBQ3JFLE9BQU8sQ0FBQyxFQUFFLENBQUMsMENBQTBDLEVBQUUsY0FBYyxDQUFDLENBQUM7UUFDdkUsT0FBTyxDQUFDLEVBQUUsQ0FBQyx5Q0FBeUMsRUFBRSxhQUFhLENBQUMsQ0FBQztJQUN6RSxDQUFDOztBQXBETCwwQ0FxREM7QUFwRDBCLDRCQUFJLEdBQUcsa0JBQUksQ0FBQyJ9