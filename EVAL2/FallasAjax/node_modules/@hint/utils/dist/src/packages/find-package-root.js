"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs_1 = require("fs");
const path_1 = require("path");
/**
 * Searches for the first folder that contains the `fileToFind` going up the
 * tree.
 *
 * By default, it looks for `package.json` in the current `__dirname` and goes
 * up the tree until one is found. If none, it throws an `Error`:
 * `No package found`.
 */
exports.findPackageRoot = (dirname = __dirname, fileToFind = 'package.json') => {
    const content = fs_1.readdirSync(dirname);
    if (content.includes(fileToFind)) {
        return dirname;
    }
    const parentFolder = path_1.resolve(dirname, '..');
    if (parentFolder === dirname) {
        throw new Error('No package found');
    }
    return exports.findPackageRoot(parentFolder, fileToFind);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmluZC1wYWNrYWdlLXJvb3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvcGFja2FnZXMvZmluZC1wYWNrYWdlLXJvb3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwyQkFBNEM7QUFDNUMsK0JBQStCO0FBRS9COzs7Ozs7O0dBT0c7QUFDVSxRQUFBLGVBQWUsR0FBRyxDQUFDLFVBQWtCLFNBQVMsRUFBRSxhQUFxQixjQUFjLEVBQVUsRUFBRTtJQUN4RyxNQUFNLE9BQU8sR0FBYSxnQkFBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRTNDLElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsRUFBRTtRQUM5QixPQUFPLE9BQU8sQ0FBQztLQUNsQjtJQUVELE1BQU0sWUFBWSxHQUFXLGNBQU8sQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFFcEQsSUFBSSxZQUFZLEtBQUssT0FBTyxFQUFFO1FBQzFCLE1BQU0sSUFBSSxLQUFLLENBQUMsa0JBQWtCLENBQUMsQ0FBQztLQUN2QztJQUVELE9BQU8sdUJBQWUsQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDckQsQ0FBQyxDQUFDIn0=