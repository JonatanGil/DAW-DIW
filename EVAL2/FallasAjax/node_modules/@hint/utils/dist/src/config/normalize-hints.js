"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * @fileoverview Used for normalizing hints that are passed as configuration.
 * Hints are stored as objects internally, so this module converts hint arrays
 * to objects or if an object is passed, it returns it.
 */
const DEFAULT_HINT_LEVEL = 'default';
const shortHandHintPrefixes = {
    '-': 'off',
    '?': 'warning'
};
const normalizeHint = (hint) => {
    let hintLevel;
    let hintName = '';
    for (const prefix in shortHandHintPrefixes) {
        if (hint.startsWith(prefix)) {
            // Matches for hint like: `?hint1`
            hintLevel = shortHandHintPrefixes[prefix];
            hintName = hint.substr(1, hint.length - 1);
            break;
        }
    }
    if (!hintLevel) {
        // Matches for a hint like: `hint1` or `hint1:warn`
        [hintName, hintLevel] = hint.split(':');
        hintLevel = hintLevel || DEFAULT_HINT_LEVEL;
    }
    return {
        hintLevel,
        hintName
    };
};
/**
 * Normalized all hints passed as configuration
 * Ex.:
 * * ["hint1"] => { "hint1": "default" }
 * * { "hint1": "warning" } => { "hint1": "warning" }
 * * ["hint1:warning"] => { "hint1": "warning" }
 */
function normalizeHints(hints) {
    if (!Array.isArray(hints)) {
        return hints;
    }
    const result = {};
    for (const hint of hints) {
        if (typeof hint === 'string') {
            const { hintName, hintLevel } = normalizeHint(hint);
            result[hintName] = hintLevel;
        }
        else if (Array.isArray(hint)) {
            const [hintKey, hintConfig] = hint;
            const { hintName, hintLevel } = normalizeHint(hintKey);
            if (hintConfig) {
                result[hintName] = [hintLevel, hintConfig];
            }
            else {
                result[hintName] = [hintLevel, {}];
            }
        }
        else {
            throw new Error(`Invalid hint type specified: "${hint}". Arrays and objects are supported.`);
        }
    }
    return result;
}
exports.default = normalizeHints;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9ybWFsaXplLWhpbnRzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbmZpZy9ub3JtYWxpemUtaGludHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFHQTs7OztHQUlHO0FBRUgsTUFBTSxrQkFBa0IsR0FBRyxTQUFTLENBQUM7QUFFckMsTUFBTSxxQkFBcUIsR0FBMEQ7SUFDakYsR0FBRyxFQUFFLEtBQUs7SUFDVixHQUFHLEVBQUUsU0FBUztDQUNqQixDQUFDO0FBT0YsTUFBTSxhQUFhLEdBQUcsQ0FBQyxJQUFZLEVBQWtCLEVBQUU7SUFDbkQsSUFBSSxTQUE0QyxDQUFDO0lBQ2pELElBQUksUUFBUSxHQUFHLEVBQUUsQ0FBQztJQUVsQixLQUFLLE1BQU0sTUFBTSxJQUFJLHFCQUFxQixFQUFFO1FBQ3hDLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUN6QixrQ0FBa0M7WUFDbEMsU0FBUyxHQUFHLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzFDLFFBQVEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzNDLE1BQU07U0FDVDtLQUNKO0lBRUQsSUFBSSxDQUFDLFNBQVMsRUFBRTtRQUNaLG1EQUFtRDtRQUNuRCxDQUFDLFFBQVEsRUFBRSxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBb0MsQ0FBQztRQUMzRSxTQUFTLEdBQUcsU0FBUyxJQUFJLGtCQUFrQixDQUFDO0tBQy9DO0lBRUQsT0FBTztRQUNILFNBQVM7UUFDVCxRQUFRO0tBQ1gsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGOzs7Ozs7R0FNRztBQUNILFNBQXdCLGNBQWMsQ0FBQyxLQUE2QztJQUNoRixJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUN2QixPQUFPLEtBQUssQ0FBQztLQUNoQjtJQUVELE1BQU0sTUFBTSxHQUFzQixFQUFFLENBQUM7SUFFckMsS0FBSyxNQUFNLElBQUksSUFBSSxLQUFLLEVBQUU7UUFDdEIsSUFBSSxPQUFPLElBQUksS0FBSyxRQUFRLEVBQUU7WUFDMUIsTUFBTSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsR0FBRyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFcEQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLFNBQVMsQ0FBQztTQUNoQzthQUFNLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUM1QixNQUFNLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxHQUFHLElBQUksQ0FBQztZQUNuQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxHQUFHLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUV2RCxJQUFJLFVBQVUsRUFBRTtnQkFDWixNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsVUFBVSxDQUFDLENBQUM7YUFDOUM7aUJBQU07Z0JBQ0gsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2FBQ3RDO1NBQ0o7YUFBTTtZQUNILE1BQU0sSUFBSSxLQUFLLENBQUMsaUNBQWlDLElBQUksc0NBQXNDLENBQUMsQ0FBQztTQUNoRztLQUNKO0lBRUQsT0FBTyxNQUFNLENBQUM7QUFDbEIsQ0FBQztBQTNCRCxpQ0EyQkMifQ==